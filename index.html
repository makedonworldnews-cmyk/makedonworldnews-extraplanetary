<!DOCTYPE html>
<html lang="mk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MAKEDON WORLD NEWS | Shield Protocol</title>
    <style>
        :root { --gold: #d4af37; --bg: #05070a; --panel: #0f1218; }
        body { background: var(--bg); color: #e2e8f0; font-family: 'Inter', sans-serif; margin: 0; padding: 0; }
        header { background: var(--panel); border-bottom: 2px solid var(--gold); padding: 20px; text-align: center; }
        .status-bar { font-family: monospace; font-size: 0.8rem; color: var(--gold); margin-top: 10px; border-top: 1px solid #1e293b; padding-top: 10px; }
        .container { padding: 20px; max-width: 1200px; margin: 0 auto; }
        .news-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px; }
        .card { background: var(--panel); border: 1px solid #1e293b; padding: 20px; border-radius: 12px; cursor: pointer; transition: 0.3s; }
        .card:hover { border-color: var(--gold); transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0,0,0,0.5); }
        .source-tag { color: var(--gold); font-size: 0.7rem; font-weight: bold; text-transform: uppercase; letter-spacing: 1px; }
        h3 { font-size: 1.1rem; margin: 10px 0; line-height: 1.4; color: white; }
        p { color: #94a3b8; font-size: 0.9rem; line-height: 1.6; }
        #loader { text-align: center; padding: 100px; color: var(--gold); font-family: monospace; font-size: 1.2rem; }
        .pulse { animation: pulse 2s infinite; }
        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.3; } 100% { opacity: 1; } }
    </style>
</head>
<body>

<header>
    <h1 style="margin:0; letter-spacing:4px; font-weight:900;">MAKEDON WORLD NEWS</h1>
    <div class="status-bar">
        TIME: <span id="clock">00:00:00</span> | 
        SATELLITE: <span id="sys-status" style="color:#22c55e">SCANNING</span> | 
        INTEL: <span id="count">0</span> ARTICLES
    </div>
</header>

<div class="container">
    <div id="loader" class="pulse">üì° –ò–ù–ò–¶–ò–à–ê–õ–ò–ó–ê–¶–ò–à–ê –ù–ê –ì–õ–û–ë–ê–õ–ï–ù –°–ö–ï–ù–ï–†...</div>
    <div id="news-grid" class="news-grid"></div>
</div>

<script>
    // –¢–≤–æ–∏—Ç–µ –∫–ª—É—á–Ω–∏ –∏–∑–≤–æ—Ä–∏
    const SOURCES = [
        { name: "–°–∏—Ç–µ–ª", url: "https://www.sitel.com.mk/feed" },
        { name: "–ú–ò–ê", url: "https://www.mia.mk/rss" },
        { name: "–¢–µ–ª–º–∞", url: "https://telma.com.mk/feed" },
        { name: "BBC News", url: "https://feeds.bbci.co.uk/news/world/rss.xml" },
        { name: "CNN", url: "https://feeds.cnn.com/rss/edition.rss" }
    ];

    // –ö–æ—Ä–∏—Å—Ç–∏–º–µ –ü–û–°–ò–ì–£–†–ï–ù –ø—Ä–æ–∫—Å–∏ –∑–∞ GitHub Pages
    const PROXY = "https://corsproxy.io/?";

    function updateClock() {
        const el = document.getElementById('clock');
        if(el) el.innerText = new Date().toLocaleTimeString('mk-MK');
    }
    setInterval(updateClock, 1000);

    async function loadNews() {
        const grid = document.getElementById('news-grid');
        const countEl = document.getElementById('count');
        const loader = document.getElementById('loader');
        let allArticles = [];

        for (let src of SOURCES) {
            try {
                // –ù–æ–≤–∏–æ—Ç –ø—Ä–æ–∫—Å–∏ –º–µ—Ç–æ–¥ –∫–æ—ò –Ω–µ –±–ª–æ–∫–∏—Ä–∞
                const response = await fetch(PROXY + encodeURIComponent(src.url));
                if (!response.ok) throw new Error('Network error');
                
                const text = await response.text();
                const parser = new DOMParser();
                const xml = parser.parseFromString(text, "text/xml");
                const items = xml.querySelectorAll("item");

                items.forEach((item, i) => {
                    if (i < 6) { // –¢–æ–ø 6 –≤–µ—Å—Ç–∏ –æ–¥ —Å–µ–∫–æ—ò
                        allArticles.push({
                            title: item.querySelector("title")?.textContent || "Breaking News",
                            link: item.querySelector("link")?.textContent || "#",
                            desc: item.querySelector("description")?.textContent?.replace(/<[^>]*>?/gm, '').substring(0, 150),
                            source: src.name
                        });
                    }
                });

                // –í–µ–¥–Ω–∞—à –∞–∂—É—Ä–∏—Ä–∞—ò –≥–æ –±—Ä–æ—ò—á–∞–Ω–∏–∫–æ—Ç
                if(countEl) countEl.innerText = allArticles.length;
                render(allArticles);

            } catch (err) {
                console.warn("Lost signal from: " + src.name);
            }
        }

        if(loader) loader.style.display = 'none';
        const sysStat = document.getElementById('sys-status');
        if(sysStat) sysStat.innerText = "ONLINE";
    }

    function render(data) {
        const grid = document.getElementById('news-grid');
        if(!grid) return;
        
        grid.innerHTML = data.map(a => `
            <div class="card" onclick="window.open('${a.link}', '_blank')">
                <span class="source-tag">üì° ${a.source}</span>
                <h3>${a.title}</h3>
                <p>${a.desc}...</p>
            </div>
        `).join('');
    }

    // –°—Ç–∞—Ä—Ç—É–≤–∞—ò –±–µ–∑–±–µ–¥–Ω–æ
    window.onload = () => {
        loadNews().catch(console.error);
    };
</script>

</body>
</html>
