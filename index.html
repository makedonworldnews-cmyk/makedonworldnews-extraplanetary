<!DOCTYPE html>
<html lang="mk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MAKEDON WORLD NEWS | Satellite Feed</title>
    <style>
        :root { --gold: #d4af37; --bg: #05070a; --card: #0f1218; }
        body { background: var(--bg); color: white; font-family: sans-serif; margin: 0; padding: 20px; }
        header { border-bottom: 2px solid var(--gold); padding: 20px; text-align: center; margin-bottom: 30px; }
        .status { color: var(--gold); font-family: monospace; font-size: 0.8em; margin-top: 10px; }
        .news-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px; }
        .card { background: var(--card); border: 1px solid #1e293b; padding: 20px; border-radius: 10px; cursor: pointer; transition: 0.3s; }
        .card:hover { border-color: var(--gold); transform: translateY(-5px); }
        .src-tag { color: var(--gold); font-weight: bold; font-size: 0.7em; text-transform: uppercase; }
        h3 { font-size: 1.1em; margin: 10px 0; color: #e2e8f0; }
        p { color: #94a3b8; font-size: 0.9em; line-height: 1.5; }
        #loader { text-align: center; padding: 50px; color: var(--gold); font-family: monospace; }
    </style>
</head>
<body>

<header>
    <h1 style="margin:0; letter-spacing:3px;">MAKEDON WORLD NEWS</h1>
    <div class="status">
        <span id="clock">00:00:00</span> | üì° SATELLITE: <span id="stat">CONNECTING...</span> | üåê SOURCES: <span id="count">0</span>
    </div>
</header>

<div id="loader">–°–¶–ï–ù–ò–†–ê–ä–ï –ù–ê –ì–õ–û–ë–ê–õ–ù–ò –§–†–ï–ö–í–ï–ù–¶–ò–ò...</div>
<div id="newsGrid" class="news-grid"></div>

<script>
    // –¢–≤–æ–∏—Ç–µ 100% —Å–∏–≥—É—Ä–Ω–∏ RSS –∏–∑–≤–æ—Ä–∏
    const SOURCES = [
        { name: "Sitel", url: "https://www.sitel.com.mk/feed" },
        { name: "MIA", url: "https://www.mia.mk/rss" },
        { name: "Telma", url: "https://telma.com.mk/feed" },
        { name: "BBC News", url: "https://feeds.bbci.co.uk/news/world/rss.xml" },
        { name: "CNN World", url: "https://feeds.cnn.com/rss/edition.rss" }
    ];

    const PROXY = "https://api.allorigins.win/get?url=";

    // 1. –°–∞–∞—Ç
    setInterval(() => {
        document.getElementById('clock').innerText = new Date().toLocaleTimeString('mk-MK');
    }, 1000);

    // 2. –ì–ª–∞–≤–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—ò–∞ –∑–∞ –≤—á–∏—Ç—É–≤–∞—ö–µ
    async function syncSystem() {
        const grid = document.getElementById('newsGrid');
        const stat = document.getElementById('stat');
        let allData = [];

        for (let src of SOURCES) {
            try {
                const res = await fetch(PROXY + encodeURIComponent(src.url));
                const json = await res.json();
                const parser = new DOMParser();
                const xml = parser.parseFromString(json.contents, "text/xml");
                const items = xml.querySelectorAll("item");

                items.forEach((item, i) => {
                    if (i < 4) { // –ó–µ–º–∏ —Ç–æ–ø 4 –æ–¥ —Å–µ–∫–æ—ò
                        allData.push({
                            title: item.querySelector("title")?.textContent || "Breaking News",
                            link: item.querySelector("link")?.textContent || "#",
                            desc: item.querySelector("description")?.textContent?.replace(/<[^>]*>?/gm, '').substring(0, 120),
                            source: src.name
                        });
                    }
                });
            } catch (e) { console.warn("Lost signal: " + src.name); }
        }

        // –†–µ–Ω–¥–∏—Ä–∞—ö–µ –Ω–∞ –µ–∫—Ä–∞–Ω–æ—Ç
        document.getElementById('loader').style.display = 'none';
        document.getElementById('count').innerText = allData.length;
        stat.innerText = "ACTIVE";
        stat.style.color = "#22c55e";

        grid.innerHTML = allData.map(a => `
            <div class="card" onclick="window.open('${a.link}', '_blank')">
                <span class="src-tag">${a.source}</span>
                <h3>${a.title}</h3>
                <p>${a.desc}...</p>
            </div>
        `).join('');
    }

    // –°—Ç–∞—Ä—Ç—É–≤–∞—ò –∫–æ–≥–∞ —ú–µ —Å–µ –≤—á–∏—Ç–∞ —Å—Ç—Ä–∞–Ω–∞—Ç–∞
    window.onload = syncSystem;
</script>

</body>
</html>
