<!DOCTYPE html>
<html lang="mk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MAKEDON WORLD NEWS - –°–∞—Ç–µ–ª–∏—Ç—Å–∫–∏ –°–∏—Å—Ç–µ–º</title>
    <style>
        :root {
            --bg: #05070a;
            --card: #0f1218;
            --gold: #d4af37;
            --text: #e2e8f0;
            --gray: #94a3b8;
        }
        body { 
            background: var(--bg); 
            color: var(--text); 
            font-family: 'Inter', sans-serif; 
            margin: 0; 
            padding: 20px;
        }
        header {
            text-align: center;
            border-bottom: 2px solid var(--gold);
            padding-bottom: 20px;
            margin-bottom: 30px;
        }
        .status-bar {
            display: flex;
            justify-content: space-around;
            background: rgba(212, 175, 55, 0.1);
            padding: 10px;
            border-radius: 5px;
            font-family: monospace;
            font-size: 0.9em;
            color: var(--gold);
        }
        .news-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }
        .news-card {
            background: var(--card);
            border: 1px solid #1e293b;
            border-radius: 12px;
            padding: 20px;
            transition: 0.3s;
            cursor: pointer;
            position: relative;
        }
        .news-card:hover {
            border-color: var(--gold);
            transform: translateY(-5px);
        }
        .badge {
            background: var(--gold);
            color: black;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 0.7em;
            font-weight: bold;
            text-transform: uppercase;
        }
        .source { color: var(--gold); font-size: 0.8em; margin-top: 10px; display: block; }
        h3 { font-size: 1.1em; margin: 10px 0; line-height: 1.4; }
        p { color: var(--gray); font-size: 0.9em; line-height: 1.5; }
        .loading { text-align: center; padding: 100px; font-size: 1.5em; color: var(--gold); }
    </style>
</head>
<body>

    <header>
        <h1>üéñÔ∏è MAKEDON WORLD NEWS</h1>
        <div class="status-bar">
            <span id="clock">00:00:00</span>
            <span>üì° –°–ò–°–¢–ï–ú: –û–ù–õ–ê–à–ù</span>
            <span>üåç –ò–ó–í–û–†–ò: <span id="count">0</span></span>
        </div>
    </header>

    <div id="loader" class="loading">üì° –ò–Ω–∏—Ü–∏—ò–∞–ª–∏–∑–∞—Ü–∏—ò–∞ –Ω–∞ —Å–∞—Ç–µ–ª–∏—Ç—Å–∫–∞ –≤—Ä—Å–∫–∞...</div>
    <div id="newsGrid" class="news-grid"></div>

    <script>
        // –¢–í–û–à–û–¢ –°–ü–ò–°–û–ö –ù–ê –ò–ó–í–û–†–ò
        const SOURCES = [
            { name: "–°–∏—Ç–µ–ª", url: "https://www.sitel.com.mk/feed" },
            { name: "–ú–ò–ê", url: "https://www.mia.mk/rss" },
            { name: "–¢–µ–ª–º–∞", url: "https://telma.com.mk/feed" },
            { name: "BBC World", url: "https://feeds.bbci.co.uk/news/world/rss.xml" },
            { name: "CNN", url: "https://feeds.cnn.com/rss/edition.rss" },
            { name: "OpenAI", url: "https://openai.com/news/rss.xml" }
        ];

        const PROXY = "https://api.allorigins.win/get?url=";

        // –°–∞–∞—Ç –≤–æ —Ä–µ–∞–ª–Ω–æ –≤—Ä–µ–º–µ
        setInterval(() => {
            document.getElementById('clock').innerText = new Date().toLocaleTimeString('mk-MK');
        }, 1000);

        async function startEngine() {
            const grid = document.getElementById('newsGrid');
            const loader = document.getElementById('loader');
            let allArticles = [];

            for (let src of SOURCES) {
                try {
                    const response = await fetch(PROXY + encodeURIComponent(src.url));
                    const data = await response.json();
                    
                    const parser = new DOMParser();
                    const xml = parser.parseFromString(data.contents, "text/xml");
                    const items = xml.querySelectorAll("item");

                    items.forEach((item, index) => {
                        if (index < 4) { // –ó–µ–º–∏ —Ç–æ–ø 4 –æ–¥ —Å–µ–∫–æ—ò
                            allArticles.push({
                                title: item.querySelector("title")?.textContent || "–ë–µ–∑ –Ω–∞—Å–ª–æ–≤",
                                link: item.querySelector("link")?.textContent || "#",
                                desc: item.querySelector("description")?.textContent?.replace(/<[^>]*>?/gm, '').substring(0, 120),
                                source: src.name,
                                date: item.querySelector("pubDate")?.textContent || "–î–µ–Ω–µ—Å"
                            });
                        }
                    });
                } catch (err) {
                    console.log("–ì—Ä–µ—à–∫–∞ —Å–æ: " + src.name);
                }
            }

            // –¢—Ä–≥–Ω–∏ –≥–æ –ª–æ–∞–¥–µ—Ä–æ—Ç
            loader.style.display = 'none';
            document.getElementById('count').innerText = allArticles.length;

            // –¶—Ä—Ç–∞—ò –≥–∏ –≤–µ—Å—Ç–∏—Ç–µ
            grid.innerHTML = allArticles.map(a => `
                <div class="news-card" onclick="window.open('${a.link}', '_blank')">
                    <span class="badge">–í–ï–°–¢</span>
                    <h3>${a.title}</h3>
                    <p>${a.desc}...</p>
                    <span class="source">üì° –ò–ó–í–û–†: ${a.source}</span>
                </div>
            `).join('');
        }

        // –ö–†–ï–ù–ò!
        window.onload = startEngine;
    </script>
</body>
</html>
